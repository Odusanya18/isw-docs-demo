<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>Interswitch Payment Gateway</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight, .highlight .w {
  color: #f8f8f2;
  background-color: #272822;
}
.highlight .err {
  color: #151515;
  background-color: #ac4142;
}
.highlight .c, .highlight .cd, .highlight .cm, .highlight .c1, .highlight .cs {
  color: #505050;
}
.highlight .cp {
  color: #f4bf75;
}
.highlight .nt {
  color: #f4bf75;
}
.highlight .o, .highlight .ow {
  color: #d0d0d0;
}
.highlight .p, .highlight .pi {
  color: #d0d0d0;
}
.highlight .gi {
  color: #90a959;
}
.highlight .gd {
  color: #ac4142;
}
.highlight .gh {
  color: #6a9fb5;
  background-color: #151515;
  font-weight: bold;
}
.highlight .k, .highlight .kn, .highlight .kp, .highlight .kr, .highlight .kv {
  color: #aa759f;
}
.highlight .kc {
  color: #d28445;
}
.highlight .kt {
  color: #d28445;
}
.highlight .kd {
  color: #d28445;
}
.highlight .s, .highlight .sb, .highlight .sc, .highlight .sd, .highlight .s2, .highlight .sh, .highlight .sx, .highlight .s1 {
  color: #90a959;
}
.highlight .sr {
  color: #75b5aa;
}
.highlight .si {
  color: #8f5536;
}
.highlight .se {
  color: #8f5536;
}
.highlight .nn {
  color: #f4bf75;
}
.highlight .nc {
  color: #f4bf75;
}
.highlight .no {
  color: #f4bf75;
}
.highlight .na {
  color: #6a9fb5;
}
.highlight .m, .highlight .mf, .highlight .mh, .highlight .mi, .highlight .il, .highlight .mo, .highlight .mb, .highlight .mx {
  color: #90a959;
}
.highlight .ss {
  color: #90a959;
}
    </style>
    <link href="../stylesheets/screen.css" rel="stylesheet" type="text/css" media="screen" />
    <link href="../stylesheets/print.css" rel="stylesheet" type="text/css" media="print" />
      <script src="../javascripts/all.js" type="text/javascript"></script>
  </head>

  <body class="webpay webpay_index" data-languages="[&quot;go&quot;,&quot;java&quot;,&quot;javascript&quot;,&quot;python&quot;,&quot;ruby&quot;,&quot;csharp&quot;,&quot;c&quot;,&quot;objective_c&quot;,&quot;php&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="../images/navbar.png" />
      </span>
    </a>
    <a id="hide-button">
      <span>
        <span class="hide-text"></span>
        <img src="../images/hide.png" />
      </span>
    </a>
    
    <div class="tocify-wrapper">
      <img src="../images/logo.png" />
        <div class="lang-selector">
              <a href="#" data-language-name="go">Go</a>
              <a href="#" data-language-name="java">Java</a>
              <a href="#" data-language-name="javascript">JavaScript</a>
              <a href="#" data-language-name="python">Python</a>
              <a href="#" data-language-name="ruby">Ruby</a>
              <a href="#" data-language-name="csharp">C#</a>
              <a href="#" data-language-name="c">Swift</a>
              <a href="#" data-language-name="objective_c">Objective-C</a>
              <a href="#" data-language-name="php">PHP</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc">
      </div>
        <ul class="toc-footer">
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id=""> Interswitch Payment Gateway </h1>

<blockquote>
<p>Scroll down for code samples, Sample requests and responses. Select a language for code samples from the tabs above or the mobile navigation menu.</p>
</blockquote>

<p>This document describes how a third-party will request for Interswitch Payment Gateway API. Note that all data formats and response definitions are in conformance with the REST standard.</p>

<p>Interswitch payment gateway is a product for businesses who would like to accept payments online and on mobile devices. </p>

<p>If you are a certified and regulated payment processor who would like to provide your own payment gateway, this payment gateway makes available a processing API with which you can process both local and international card payments for businesses in Nigeria, Kenya, Uganda and Gambia. </p>

<p>For more information about these possibilities, please send an email to <a href="mailto:ipgsupport@interswitchgroup.com">ipgsupport@interswitchgroup.com</a></p>

<h1 id="getting-access-token"> Getting Access Token </h1>

<p>To begin the using the platform, you must register for an account on the <a href="https://www.interswitchgroup.com/paymentgateway/">Interswitch Payment Gateway portal</a>. </p>

<p>Please follow the registration process and you&rsquo;d be redirected to the platform.</p>

<p><aside class="warning">
Note that the link above gives you production keys, use the test samples available <a href="#test-merchant-details">here</a> if you&rsquo;re using the sandbox test environment.
</aside></p>

          <h1 id="summary"> Making a Basic Purchase with Interswitch</h1>

<p>To make a basic purchase with Interswitch, you can follow up with the following links:</p>

<ul>
<li><a href="#getting-your-bearer-token">Get your Bearer Token</a></li>
<li><a href="#notes">Check out the notes on how to generate the header and body secrets</a></li>
</ul>

          <h1 id="-default-notes"> Notes </h1>
<h2 id='endpoints'>Endpoints</h2>
<p>Base endpoints for this documentation can be referenced from this table:</p>

<table><thead>
<tr>
<th>Function</th>
<th>Sandbox</th>
<th>Production</th>
</tr>
</thead><tbody>
<tr>
<td><strong>Passport / Access Token</strong></td>
<td>https://sandbox.interswitchng.com</td>
<td>https://passport.interswitchng.com</td>
</tr>
<tr>
<td><strong>Transactions and Purchases</strong></td>
<td>https://sandbox.interswitchng.com</td>
<td>https://saturn.interswitchng.com</td>
</tr>
<tr>
<td><strong><em>Querying Transaction Status using Webpay</em></strong> <br \> Reference API docs <a href="#opIdGET_collections-api-v1-gettransaction-json">here</a></td>
<td>https://sandbox.interswitchng.com</td>
<td>https://webpay.interswitchng.com</td>
</tr>
<tr>
<td><strong><em>Visa Transactions</em></strong></td>
<td>All endpoints are returned in the purchase response</td>
<td>Ditto</td>
</tr>
</tbody></table>
<h2 id='authdata'>AuthData</h2>
<blockquote>
<p>Code Samples are in Java</p>
</blockquote>
<pre class="highlight java">  <span class="n">String</span> <span class="n">authDataVersion</span> <span class="o">=</span> <span class="s">"1"</span><span class="o">;</span>
  <span class="n">String</span> <span class="n">pan</span> <span class="o">=</span> <span class="s">"5060990580000217499"</span><span class="o">;</span>        <span class="c1">// Payment Card</span>
  <span class="n">String</span> <span class="n">expiryDate</span> <span class="o">=</span> <span class="s">"2004"</span><span class="o">;</span>                <span class="c1">//Card Expiry date: April (04), 2020 (20) - YYMM</span>
  <span class="n">String</span> <span class="n">cvv2</span> <span class="o">=</span> <span class="s">"111"</span><span class="o">;</span>                       <span class="c1">// Card CVV2</span>
  <span class="n">String</span> <span class="n">pin</span> <span class="o">=</span> <span class="s">"1111"</span><span class="o">;</span>                       <span class="c1">// Card pin</span>
  <span class="n">String</span> <span class="n">authData</span> <span class="o">=</span> <span class="n">getAuthData</span><span class="o">(</span><span class="n">authDataVersion</span><span class="o">,</span> <span class="n">pan</span><span class="o">,</span> <span class="n">pin</span><span class="o">,</span> <span class="n">expiryDate</span><span class="o">,</span> <span class="n">cvv2</span><span class="o">);</span>
  <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"AuthData : "</span> <span class="o">+</span> <span class="n">authData</span><span class="o">);</span>

  <span class="kd">public</span> <span class="kd">static</span> <span class="n">String</span> <span class="n">getAuthData</span><span class="o">(</span><span class="n">String</span> <span class="n">version</span><span class="o">,</span> <span class="n">String</span> <span class="n">pan</span><span class="o">,</span> <span class="n">String</span> <span class="n">pin</span><span class="o">,</span> <span class="n">String</span> <span class="n">expiryDate</span><span class="o">,</span> <span class="n">String</span> <span class="n">cvv2</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
        <span class="n">String</span> <span class="n">authData</span> <span class="o">=</span> <span class="s">""</span><span class="o">;</span>
        <span class="n">String</span> <span class="n">authDataCipher</span> <span class="o">=</span> <span class="n">version</span> <span class="o">+</span> <span class="s">"Z"</span> <span class="o">+</span> <span class="n">pan</span> <span class="o">+</span> <span class="s">"Z"</span> <span class="o">+</span> <span class="n">pin</span> <span class="o">+</span> <span class="s">"Z"</span> <span class="o">+</span> <span class="n">expiryDate</span> <span class="o">+</span> <span class="s">"Z"</span> <span class="o">+</span> <span class="n">cvv2</span><span class="o">;</span>
        <span class="c1">// The Modulus and Public Exponent will be supplied by Interswitch. please ask for one</span>
        <span class="n">String</span> <span class="n">modulus</span> <span class="o">=</span> <span class="s">"XXXXXXX"</span><span class="o">;</span>
        <span class="n">String</span> <span class="n">publicExponent</span> <span class="o">=</span> <span class="s">"XXXXXXX"</span><span class="o">;</span>
        <span class="n">Security</span><span class="o">.</span><span class="na">addProvider</span><span class="o">(</span><span class="k">new</span> <span class="n">BouncyCastleProvider</span><span class="o">());</span>
        <span class="n">RSAPublicKeySpec</span> <span class="n">publicKeyspec</span> <span class="o">=</span> <span class="k">new</span> <span class="n">RSAPublicKeySpec</span><span class="o">(</span><span class="k">new</span> <span class="n">BigInteger</span><span class="o">(</span><span class="n">modulus</span><span class="o">,</span> <span class="mi">16</span><span class="o">),</span> <span class="k">new</span> <span class="n">BigInteger</span><span class="o">(</span><span class="n">publicExponent</span><span class="o">,</span> <span class="mi">16</span><span class="o">));</span>
        <span class="n">KeyFactory</span> <span class="n">factory</span> <span class="o">=</span> <span class="n">KeyFactory</span><span class="o">.</span><span class="na">getInstance</span><span class="o">(</span><span class="s">"RSA"</span><span class="o">);</span> <span class="c1">//, "JHBCI");</span>
        <span class="n">PublicKey</span> <span class="n">publicKey</span> <span class="o">=</span> <span class="n">factory</span><span class="o">.</span><span class="na">generatePublic</span><span class="o">(</span><span class="n">publicKeyspec</span><span class="o">);</span>
        <span class="n">Cipher</span> <span class="n">encryptCipher</span> <span class="o">=</span> <span class="n">Cipher</span><span class="o">.</span><span class="na">getInstance</span><span class="o">(</span><span class="s">"RSA/ECB/PKCS1Padding"</span><span class="o">,</span> <span class="s">"BC"</span><span class="o">);</span>
        <span class="n">encryptCipher</span><span class="o">.</span><span class="na">init</span><span class="o">(</span><span class="n">Cipher</span><span class="o">.</span><span class="na">ENCRYPT_MODE</span><span class="o">,</span> <span class="n">publicKey</span><span class="o">);</span>
        <span class="kt">byte</span><span class="o">[]</span> <span class="n">authDataBytes</span> <span class="o">=</span> <span class="n">encryptCipher</span><span class="o">.</span><span class="na">doFinal</span><span class="o">(</span><span class="n">authDataCipher</span><span class="o">.</span><span class="na">getBytes</span><span class="o">(</span><span class="s">"UTF8"</span><span class="o">));</span>
        <span class="n">authData</span> <span class="o">=</span> <span class="n">Base64</span><span class="o">.</span><span class="na">getEncoder</span><span class="o">().</span><span class="na">encodeToString</span><span class="o">(</span><span class="n">authDataBytes</span><span class="o">).</span><span class="na">replaceAll</span><span class="o">(</span><span class="s">"\\r|\\n"</span><span class="o">,</span> <span class="s">""</span><span class="o">);</span>
        <span class="k">return</span> <span class="n">authData</span><span class="o">;</span>
    <span class="o">}</span>
</pre>

<p>AuthData is a combination of your payment’s sensitive data mainly: </p>

<ul>
<li>PAN</li>
<li>PIN</li>
<li>Expiry Date</li>
<li>CVV2</li>
<li>Auth Data Version <strong><em>by default, 1</em></strong></li>
</ul>

<p>The BouncyCastle library is required for this.</p>

<p>Kindly download the appropriate BouncyCastle library for your platform.  </p>

<p>You will also be provided with a public key exponent as well as a modulus.</p>

<p>For more information about these possibilities, please send an email to <a href="mailto:ipgsupport@interswitchgroup.com">ipgsupport@interswitchgroup.com</a></p>
<h2 id='nonce'>Nonce</h2>
<blockquote>
<p>Sample implementation in PHP</p>
</blockquote>
<pre class="highlight php">
function nonce()
{
     return substr(str_shuffle(MD5(microtime())), 0, 20);
}
</pre>

<p>Nonce is a unique generated value for each request. It should not be repeated, i.e. a unique nonce should be sent for each and every request. Length of the nonce should NOT be more than 64 characters.</p>
<h2 id='timestamps'>Timestamps</h2><h2 id='transaction-references'>Transaction References</h2>
<p><a id="transaction-references"></a></p>

<blockquote>
<p>Implementation</p>
</blockquote>
<pre class="highlight plaintext">    JB-{{Insert Timestamp here}}-{{Transaction Type}}

    Transaction can have the formats of either one of the types declared below:

    // For transactions that do not require OTP authentication
    - NoOTP  

    // For transactions that require OTP authentication
    - OTPPurchase 

    //For VISA transaction
    - VISA 

    //For enrolling cards to use OTP for authentication
    - Enrol 

    //Used to obtain the token for  a recurring transaction
    - ReccValid

    //Used to make a recurrent purchase [Requires a token]
    - ReccPurch


    For Sample, JB-124334323-OTPPurchase
</pre>

<p>This is used to state what type of transaction you&rsquo;d be performing.</p>

<p>Generally, it has a format as shown on the other side.</p>

<p>Using this format is not compulsory but it does aid in debugging fail transactions and assessing what kind is being used.</p>

          <h2 id='getting-a-bearer-token'>Getting a Bearer Token</h2>
<p><a id="opIdPOST_passport-oauth-token"></a></p>

<blockquote>
<p>Code samples</p>
</blockquote>
<pre class="highlight objective_c"><span class="cp">#import &lt;Foundation/Foundation.h&gt;  
</span>
<span class="n">NSDictionary</span> <span class="o">*</span><span class="n">headers</span> <span class="o">=</span> <span class="err">@</span><span class="p">{</span> <span class="s">@"accept"</span><span class="o">:</span> <span class="s">@"application/x-www-form-urlencoded"</span><span class="p">,</span>  
                           <span class="s">@"content-type"</span><span class="o">:</span> <span class="s">@"SOME_STRING_VALUE"</span><span class="p">,</span>  
                           <span class="s">@"authorization"</span><span class="o">:</span> <span class="s">@"SOME_STRING_VALUE"</span> <span class="p">};</span>  

<span class="n">NSMutableURLRequest</span> <span class="o">*</span><span class="n">request</span> <span class="o">=</span> <span class="p">[</span><span class="n">NSMutableURLRequest</span> <span class="nf">requestWithURL</span><span class="p">:[</span><span class="n">NSURL</span> <span class="nf">URLWithString</span><span class="p">:</span><span class="s">@"/passport/oauth/token"</span><span class="p">]</span>  
                                                       <span class="nf">cachePolicy</span><span class="p">:</span><span class="n">NSURLRequestUseProtocolCachePolicy</span>  
                                                   <span class="nf">timeoutInterval</span><span class="p">:</span><span class="mi">10</span><span class="p">.</span><span class="mi">0</span><span class="p">];</span>  
<span class="p">[</span><span class="n">request</span> <span class="nf">setHTTPMethod</span><span class="p">:</span><span class="s">@"POST"</span><span class="p">];</span>  
<span class="p">[</span><span class="n">request</span> <span class="nf">setAllHTTPHeaderFields</span><span class="p">:</span><span class="n">headers</span><span class="p">];</span>  

<span class="n">NSURLSession</span> <span class="o">*</span><span class="n">session</span> <span class="o">=</span> <span class="p">[</span><span class="n">NSURLSession</span> <span class="nf">sharedSession</span><span class="p">];</span>  
<span class="n">NSURLSessionDataTask</span> <span class="o">*</span><span class="n">dataTask</span> <span class="o">=</span> <span class="p">[</span><span class="n">session</span> <span class="nf">dataTaskWithRequest</span><span class="p">:</span><span class="n">request</span>  
                                            <span class="nf">completionHandler</span><span class="p">:</span><span class="o">^</span><span class="p">(</span><span class="n">NSData</span> <span class="o">*</span><span class="n">data</span><span class="p">,</span> <span class="n">NSURLResponse</span> <span class="o">*</span><span class="n">response</span><span class="p">,</span> <span class="n">NSError</span> <span class="o">*</span><span class="n">error</span><span class="p">)</span> <span class="p">{</span>  
                                                <span class="k">if</span> <span class="p">(</span><span class="n">error</span><span class="p">)</span> <span class="p">{</span>  
                                                    <span class="n">NSLog</span><span class="p">(</span><span class="s">@"%@"</span><span class="p">,</span> <span class="n">error</span><span class="p">)</span><span class="err">;</span>  
                                                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>  
                                                    <span class="n">NSHTTPURLResponse</span> <span class="o">*</span><span class="n">httpResponse</span> <span class="o">=</span> <span class="p">(</span><span class="n">NSHTTPURLResponse</span> <span class="o">*</span><span class="p">)</span> <span class="n">response</span><span class="err">;</span>  
                                                    <span class="n">NSLog</span><span class="p">(</span><span class="s">@"%@"</span><span class="p">,</span> <span class="n">httpResponse</span><span class="p">)</span><span class="err">;</span>  
                                                <span class="p">}</span>  
                                            <span class="p">}];</span>  
<span class="p">[</span><span class="n">dataTask</span> <span class="nf">resume</span><span class="p">];</span>

</pre>
<pre class="highlight c"><span class="n">import</span> <span class="n">Foundation</span>  

<span class="n">let</span> <span class="n">headers</span> <span class="o">=</span> <span class="p">[</span>  
  <span class="s">"accept"</span><span class="o">:</span> <span class="s">"application/x-www-form-urlencoded"</span><span class="p">,</span>  
  <span class="s">"content-type"</span><span class="o">:</span> <span class="s">"SOME_STRING_VALUE"</span><span class="p">,</span>  
  <span class="s">"authorization"</span><span class="o">:</span> <span class="s">"SOME_STRING_VALUE"</span>  
<span class="p">]</span>  

<span class="n">var</span> <span class="n">request</span> <span class="o">=</span> <span class="n">NSMutableURLRequest</span><span class="p">(</span><span class="n">URL</span><span class="o">:</span> <span class="n">NSURL</span><span class="p">(</span><span class="n">string</span><span class="o">:</span> <span class="s">"/passport/oauth/token"</span><span class="p">)</span><span class="o">!</span><span class="p">,</span>  
                                        <span class="n">cachePolicy</span><span class="o">:</span> <span class="p">.</span><span class="n">UseProtocolCachePolicy</span><span class="p">,</span>  
                                    <span class="n">timeoutInterval</span><span class="o">:</span> <span class="mi">10</span><span class="p">.</span><span class="mi">0</span><span class="p">)</span>  
<span class="n">request</span><span class="p">.</span><span class="n">HTTPMethod</span> <span class="o">=</span> <span class="s">"POST"</span>  
<span class="n">request</span><span class="p">.</span><span class="n">allHTTPHeaderFields</span> <span class="o">=</span> <span class="n">headers</span>  

<span class="n">let</span> <span class="n">session</span> <span class="o">=</span> <span class="n">NSURLSession</span><span class="p">.</span><span class="n">sharedSession</span><span class="p">()</span>  
<span class="n">let</span> <span class="n">dataTask</span> <span class="o">=</span> <span class="n">session</span><span class="p">.</span><span class="n">dataTaskWithRequest</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">completionHandler</span><span class="o">:</span> <span class="p">{</span> <span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">response</span><span class="p">,</span> <span class="n">error</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Void</span> <span class="n">in</span>  
  <span class="k">if</span> <span class="p">(</span><span class="n">error</span> <span class="o">!=</span> <span class="n">nil</span><span class="p">)</span> <span class="p">{</span>  
    <span class="n">println</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>  
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>  
    <span class="n">let</span> <span class="n">httpResponse</span> <span class="o">=</span> <span class="n">response</span> <span class="n">as</span><span class="o">?</span> <span class="n">NSHTTPURLResponse</span>  
    <span class="n">println</span><span class="p">(</span><span class="n">httpResponse</span><span class="p">)</span>  
  <span class="p">}</span>  
<span class="p">})</span>  

<span class="n">dataTask</span><span class="p">.</span><span class="n">resume</span><span class="p">()</span>
</pre>
<pre class="highlight php">
<span class="cp">&lt;?php</span>  

<span class="nv">$curl</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">();</span>  

<span class="nb">curl_setopt_array</span><span class="p">(</span><span class="nv">$curl</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>  
  <span class="nx">CURLOPT_URL</span> <span class="o">=&gt;</span> <span class="s2">"/passport/oauth/token"</span><span class="p">,</span>  
  <span class="nx">CURLOPT_RETURNTRANSFER</span> <span class="o">=&gt;</span> <span class="kc">true</span><span class="p">,</span>  
  <span class="nx">CURLOPT_ENCODING</span> <span class="o">=&gt;</span> <span class="s2">""</span><span class="p">,</span>  
  <span class="nx">CURLOPT_MAXREDIRS</span> <span class="o">=&gt;</span> <span class="mi">10</span><span class="p">,</span>  
  <span class="nx">CURLOPT_TIMEOUT</span> <span class="o">=&gt;</span> <span class="mi">30</span><span class="p">,</span>  
  <span class="nx">CURLOPT_HTTP_VERSION</span> <span class="o">=&gt;</span> <span class="nx">CURL_HTTP_VERSION_1_1</span><span class="p">,</span>  
  <span class="nx">CURLOPT_CUSTOMREQUEST</span> <span class="o">=&gt;</span> <span class="s2">"POST"</span><span class="p">,</span>  
  <span class="nx">CURLOPT_HTTPHEADER</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>  
    <span class="s2">"accept: application/x-www-form-urlencoded"</span><span class="p">,</span>  
    <span class="s2">"authorization: SOME_STRING_VALUE"</span><span class="p">,</span>  
    <span class="s2">"content-type: SOME_STRING_VALUE"</span>  
  <span class="p">),</span>  
<span class="p">));</span>  

<span class="nv">$response</span> <span class="o">=</span> <span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$curl</span><span class="p">);</span>  
<span class="nv">$err</span> <span class="o">=</span> <span class="nb">curl_error</span><span class="p">(</span><span class="nv">$curl</span><span class="p">);</span>  

<span class="nb">curl_close</span><span class="p">(</span><span class="nv">$curl</span><span class="p">);</span>  

<span class="k">if</span> <span class="p">(</span><span class="nv">$err</span><span class="p">)</span> <span class="p">{</span>  
  <span class="k">echo</span> <span class="s2">"cURL Error #:"</span> <span class="o">.</span> <span class="nv">$err</span><span class="p">;</span>  
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>  
  <span class="k">echo</span> <span class="nv">$response</span><span class="p">;</span>  
<span class="p">}</span>
</pre>
<pre class="highlight csharp"><span class="n">var</span> <span class="n">client</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">RestClient</span><span class="p">(</span><span class="s">"/passport/oauth/token"</span><span class="p">);</span>  
<span class="n">var</span> <span class="n">request</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">RestRequest</span><span class="p">(</span><span class="n">Method</span><span class="p">.</span><span class="n">POST</span><span class="p">);</span>  
<span class="n">request</span><span class="p">.</span><span class="nf">AddHeader</span><span class="p">(</span><span class="s">"authorization"</span><span class="p">,</span> <span class="s">"SOME_STRING_VALUE"</span><span class="p">);</span>  
<span class="n">request</span><span class="p">.</span><span class="nf">AddHeader</span><span class="p">(</span><span class="s">"content-type"</span><span class="p">,</span> <span class="s">"SOME_STRING_VALUE"</span><span class="p">);</span>  
<span class="n">request</span><span class="p">.</span><span class="nf">AddHeader</span><span class="p">(</span><span class="s">"accept"</span><span class="p">,</span> <span class="s">"application/x-www-form-urlencoded"</span><span class="p">);</span>  
<span class="n">IRestResponse</span> <span class="n">response</span> <span class="p">=</span> <span class="n">client</span><span class="p">.</span><span class="nf">Execute</span><span class="p">(</span><span class="n">request</span><span class="p">);</span>
</pre>
<pre class="highlight go"><span class="k">package</span><span class="x"> </span><span class="n">main</span><span class="x">

</span><span class="k">import</span><span class="x"> </span><span class="p">(</span><span class="x">
       </span><span class="s">"bytes"</span><span class="x">
       </span><span class="s">"net/http"</span><span class="x">
</span><span class="p">)</span><span class="x">

</span><span class="k">func</span><span class="x"> </span><span class="n">main</span><span class="p">()</span><span class="x"> </span><span class="p">{</span><span class="x">

    </span><span class="n">headers</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="k">map</span><span class="p">[</span><span class="kt">string</span><span class="p">][]</span><span class="kt">string</span><span class="p">{</span><span class="x">
        </span><span class="s">"Content-Type"</span><span class="o">:</span><span class="x"> </span><span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">"application/x-www-form-urlencoded"</span><span class="p">},</span><span class="x">
        </span><span class="s">"Accept"</span><span class="o">:</span><span class="x"> </span><span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">"*/*"</span><span class="p">},</span><span class="x">
        </span><span class="s">"Content-Type"</span><span class="o">:</span><span class="x"> </span><span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">" application/x-www-form-urlencoded"</span><span class="p">},</span><span class="x">
        </span><span class="s">"Authorization"</span><span class="o">:</span><span class="x"> </span><span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">" &lt;&lt;Authorization&gt;&gt;"</span><span class="p">},</span><span class="x">

    </span><span class="p">}</span><span class="x">

    </span><span class="n">data</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">bytes</span><span class="o">.</span><span class="n">NewBuffer</span><span class="p">([]</span><span class="kt">byte</span><span class="p">{</span><span class="n">jsonReq</span><span class="p">})</span><span class="x">
    </span><span class="n">req</span><span class="p">,</span><span class="x"> </span><span class="n">err</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">http</span><span class="o">.</span><span class="n">NewRequest</span><span class="p">(</span><span class="s">"POST"</span><span class="p">,</span><span class="x"> </span><span class="s">"/passport/oauth/token"</span><span class="p">,</span><span class="x"> </span><span class="n">data</span><span class="p">)</span><span class="x">
    </span><span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="x"> </span><span class="o">=</span><span class="x"> </span><span class="n">headers</span><span class="x">

    </span><span class="n">client</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="o">&amp;</span><span class="n">http</span><span class="o">.</span><span class="n">Client</span><span class="p">{}</span><span class="x">
    </span><span class="n">resp</span><span class="p">,</span><span class="x"> </span><span class="n">err</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">client</span><span class="o">.</span><span class="n">Do</span><span class="p">(</span><span class="n">req</span><span class="p">)</span><span class="x">
    </span><span class="c">// ...</span><span class="x">
</span><span class="p">}</span><span class="x">

</span></pre>
<pre class="highlight java"><span class="n">URL</span> <span class="n">obj</span> <span class="o">=</span> <span class="k">new</span> <span class="n">URL</span><span class="o">(</span><span class="s">"/passport/oauth/token"</span><span class="o">);</span>
<span class="n">HttpURLConnection</span> <span class="n">con</span> <span class="o">=</span> <span class="o">(</span><span class="n">HttpURLConnection</span><span class="o">)</span> <span class="n">obj</span><span class="o">.</span><span class="na">openConnection</span><span class="o">();</span>
<span class="n">con</span><span class="o">.</span><span class="na">setRequestMethod</span><span class="o">(</span><span class="s">"POST"</span><span class="o">);</span>
<span class="kt">int</span> <span class="n">responseCode</span> <span class="o">=</span> <span class="n">con</span><span class="o">.</span><span class="na">getResponseCode</span><span class="o">();</span>
<span class="n">BufferedReader</span> <span class="n">in</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BufferedReader</span><span class="o">(</span>
    <span class="k">new</span> <span class="n">InputStreamReader</span><span class="o">(</span><span class="n">con</span><span class="o">.</span><span class="na">getInputStream</span><span class="o">()));</span>
<span class="n">String</span> <span class="n">inputLine</span><span class="o">;</span>
<span class="n">StringBuffer</span> <span class="n">response</span> <span class="o">=</span> <span class="k">new</span> <span class="n">StringBuffer</span><span class="o">();</span>
<span class="k">while</span> <span class="o">((</span><span class="n">inputLine</span> <span class="o">=</span> <span class="n">in</span><span class="o">.</span><span class="na">readLine</span><span class="o">())</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">response</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">inputLine</span><span class="o">);</span>
<span class="o">}</span>
<span class="n">in</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">response</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>

</pre>
<pre class="highlight javascript"><span class="kd">var</span> <span class="nx">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s1">'Content-Type'</span><span class="err">:</span><span class="s1">'application/x-www-form-urlencoded'</span><span class="p">,</span>
  <span class="s1">'Accept'</span><span class="err">:</span><span class="s1">'*/*'</span><span class="p">,</span>
  <span class="s1">'Content-Type'</span><span class="err">:</span><span class="s1">' application/x-www-form-urlencoded'</span><span class="p">,</span>
  <span class="s1">'Authorization'</span><span class="err">:</span><span class="s1">' &lt;&lt;Authorization&gt;&gt;'</span>

<span class="p">};</span>

<span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span>
  <span class="na">url</span><span class="p">:</span> <span class="s1">'/passport/oauth/token'</span><span class="p">,</span>
  <span class="na">method</span><span class="p">:</span> <span class="s1">'post'</span><span class="p">,</span>

  <span class="na">headers</span><span class="p">:</span> <span class="nx">headers</span><span class="p">,</span>
  <span class="na">success</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">data</span><span class="p">));</span>
  <span class="p">}</span>
<span class="p">})</span>

</pre>
<pre class="highlight python"><span class="kn">import</span> <span class="nn">requests</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s">'Content-Type'</span><span class="p">:</span> <span class="s">'application/x-www-form-urlencoded'</span><span class="p">,</span>
  <span class="s">'Accept'</span><span class="p">:</span> <span class="s">'*/*'</span><span class="p">,</span>
  <span class="s">'Content-Type'</span><span class="p">:</span> <span class="s">' application/x-www-form-urlencoded'</span><span class="p">,</span>
  <span class="s">'Authorization'</span><span class="p">:</span> <span class="s">' &lt;&lt;Authorization&gt;&gt;'</span>
<span class="p">}</span>

<span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="s">'/passport/oauth/token'</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="p">{</span>

<span class="p">},</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">headers</span><span class="p">)</span>

<span class="k">print</span> <span class="n">r</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>

</pre>
<pre class="highlight ruby"><span class="nb">require</span> <span class="s1">'rest-client'</span>
<span class="nb">require</span> <span class="s1">'json'</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s1">'Content-Type'</span> <span class="o">=&gt;</span> <span class="s1">'application/x-www-form-urlencoded'</span><span class="p">,</span>
  <span class="s1">'Accept'</span> <span class="o">=&gt;</span> <span class="s1">'*/*'</span><span class="p">,</span>
  <span class="s1">'Content-Type'</span> <span class="o">=&gt;</span> <span class="s1">' application/x-www-form-urlencoded'</span><span class="p">,</span>
  <span class="s1">'Authorization'</span> <span class="o">=&gt;</span> <span class="s1">' &lt;&lt;Authorization&gt;&gt;'</span>
<span class="p">}</span>

<span class="n">result</span> <span class="o">=</span> <span class="no">RestClient</span><span class="p">.</span><span class="nf">post</span> <span class="s1">'/passport/oauth/token'</span><span class="p">,</span>
  <span class="ss">params: </span><span class="p">{</span>
  <span class="p">},</span> <span class="ss">headers: </span><span class="n">headers</span>

<span class="nb">p</span> <span class="no">JSON</span><span class="p">.</span><span class="nf">parse</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>

</pre>

<p><code class="prettyprint">POST /passport/oauth/token</code></p>

<p>Before making any request, you&rsquo;re required to generate a Bearer token using this endpoint. This will be the new Authorization header value when making a request.</p>

<blockquote>
<p>Body parameter</p>
</blockquote>
<pre class="highlight yaml"><span class="s">grant_type</span><span class="pi">:</span> <span class="s">client_credentials</span>

</pre>

<h3 id="post_passport-oauth-token-headers">Headers</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>In</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>Content-Type</td>
<td>header</td>
<td>string</td>
<td>true</td>
<td>application/x-www-form-urlencoded</td>
</tr>
<tr>
<td>Authorization</td>
<td>header</td>
<td>string</td>
<td>true</td>
<td>The content here is a basic token coupled with the Base64 encoding of the string combination of the client ID and the secret key: <br > <strong><em>Basic Base64(clientId+&ldquo;:&rdquo;+secretKey)</em></strong></td>
</tr>
</tbody></table>

<h3 id="post_passport-oauth-token-body">Request Body</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>In</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>grant_type</td>
<td>body</td>
<td>string</td>
<td>true</td>
<td>By default, use <strong><em>client_credentials</em></strong> as its value</td>
</tr>
</tbody></table>

<blockquote>
<p>Response Sample</p>
</blockquote>
<pre class="highlight json"><span class="p">{</span><span class="w">
    </span><span class="s2">"access_token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;ACCESS_TOKEN&gt;"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"token_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bearer"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"scope"</span><span class="p">:</span><span class="w"> </span><span class="s2">"profile"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"merchant_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MX187"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"production_payment_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00164639854"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"requestor_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00117614992"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"payable_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2324"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"payment_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"042594130246"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"jti"</span><span class="p">:</span><span class="w"> </span><span class="s2">"487a338b-3290-4184-ad48-28a28f3838b6"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre>

<h3 id="post_passport-oauth-token-responses">Response Body</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>In</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>access_token</td>
<td>response</td>
<td>string</td>
<td>This is the bearer token that will be used in your transaction</td>
</tr>
<tr>
<td>token_type</td>
<td>response</td>
<td>string</td>
<td>Default is <strong><em>Bearer</em></strong></td>
</tr>
<tr>
<td>scope</td>
<td>response</td>
<td>string</td>
<td>Default is <strong><em>profile</em></strong></td>
</tr>
<tr>
<td>merchant_code</td>
<td>response</td>
<td>string</td>
<td>This is the short string representing your business identity</td>
</tr>
<tr>
<td>production_payment_code</td>
<td>response</td>
<td>string</td>
<td>Your merchant payment code</td>
</tr>
<tr>
<td>requestor_id</td>
<td>response</td>
<td>string</td>
<td>Your requestor identity code</td>
</tr>
<tr>
<td>payable_id</td>
<td>response</td>
<td>string</td>
<td>none</td>
</tr>
<tr>
<td>payment_code</td>
<td>response</td>
<td>string</td>
<td>none</td>
</tr>
<tr>
<td>jti</td>
<td>response</td>
<td>string</td>
<td>none</td>
</tr>
</tbody></table>

<h3 id="post_passport-oauth-token-responseschema">Response Schema</h3>

<p><aside class="warning">
This operation requires authentication using the <strong><em>Basic Authorization</em></strong> header
</aside></p>

          <h1 id='test-transaction-details'>Test Transaction Details</h1><h2 id='test-card-details'>Test Card Details</h2>
<table><thead>
<tr>
<th>Description</th>
<th>PAN</th>
<th>Expiry Date</th>
<th>PIN</th>
<th>CVC</th>
</tr>
</thead><tbody>
<tr>
<td>Successful Transaction Verve Test Card (No OTP)</td>
<td>5061030000000000084</td>
<td>Sept 2019</td>
<td>1234</td>
<td>123</td>
</tr>
<tr>
<td></td>
<td>6280511000000095</td>
<td>Dec 2026</td>
<td>0000</td>
<td>123</td>
</tr>
<tr>
<td>Insufficient Funds Verve Test Card</td>
<td>5061030000000000027</td>
<td>Sept 2019</td>
<td>1234</td>
<td>123</td>
</tr>
<tr>
<td>VISA Test Card (iPIN)</td>
<td>4000000000000002</td>
<td>Apr 2020</td>
<td><No PIN></td>
<td>123</td>
</tr>
<tr>
<td>Incorrect PIN (Masked as “Transaction Error”) Verve Test Card</td>
<td>5061030000000000035</td>
<td>Sept 2019</td>
<td>0000</td>
<td>123</td>
</tr>
<tr>
<td>AutoEnrollment Test Card (Response Code ‘M0’ returned)</td>
<td>5061040000000000231</td>
<td>Jan 2019</td>
<td>1234</td>
<td>123</td>
</tr>
<tr>
<td>Successful Transaction Verve Test Card (OTP)</td>
<td>Kindly request for a test card to be configured for you, so as to receive OTP via email.</td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody></table>
<h2 id='test-merchant-details'>Test Merchant Details</h2>
<table><thead>
<tr>
<th>Client ID</th>
<th>Secret Key</th>
<th>Merchant Code</th>
<th>Requestor ID</th>
</tr>
</thead><tbody>
<tr>
<td>IKIA9614B82064D632E9B6418DF358A6A4AEA84D7218</td>
<td>XCTiBtLy1G9chAnyg0z3BcaFK4cVpwDg/GTw2EmjTZ8=</td>
<td>MX187</td>
<td>00117614992</td>
</tr>
<tr>
<td>IKIACA67D931869E40BE07EE418A0B07A4A6D9EEF588</td>
<td>y0FISAGAS+OSIASec5Cts/khsWVXaWCoxZcLF2d8o/A=</td>
<td>MX1209</td>
<td>None</td>
</tr>
</tbody></table>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="go">Go</a>
                <a href="#" data-language-name="java">Java</a>
                <a href="#" data-language-name="javascript">JavaScript</a>
                <a href="#" data-language-name="python">Python</a>
                <a href="#" data-language-name="ruby">Ruby</a>
                <a href="#" data-language-name="csharp">C#</a>
                <a href="#" data-language-name="c">Swift</a>
                <a href="#" data-language-name="objective_c">Objective-C</a>
                <a href="#" data-language-name="php">PHP</a>
          </div>
      </div>
    </div>
  </body>
</html>
